{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observer/array.js","../../src/observer/dep.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parser-html.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/util/next-tick.js","../../src/observer/schedular.js","../../src/observer/watcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/create-element.js","../../src/render.js","../../src/initGlobalAPI/index.js","../../src/index.js"],"sourcesContent":["// 判断传参是否为对象\r\nexport function isObject(data) {\r\n  return typeof data === 'object' && data !== null\r\n}\r\n\r\n// Object.defineProperty的特定简写 不可枚举\r\nexport function def(data, key, value) {\r\n  Object.defineProperty(data, key, {\r\n    enumerable: false,\r\n    configurable: false,\r\n    value,\r\n  })\r\n}\r\n\r\nexport function proxy(vm, source, key) { // 数据访问代理\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[source][key]\r\n    },\r\n    set(newVal) {\r\n      vm[source][key] = newVal\r\n    },\r\n  })\r\n}\r\n\r\nconst LIFECYCLE_HOOKS = [ // 生命周期名字\r\n  'beforeCreate',\r\n  'created',\r\n  'beforeMount',\r\n  'mounted',\r\n  'beforeUpdate',\r\n  'updated',\r\n  'beforeDestroy',\r\n  'destroyed',\r\n]\r\n\r\nconst strats = {}\r\n\r\nLIFECYCLE_HOOKS.forEach((hook) => {\r\n  strats[hook] = mergeHook\r\n})\r\n\r\nfunction mergeHook(oldVal, newVal) {\r\n  if (newVal) {\r\n    if (oldVal) {\r\n      return oldVal.concat(newVal)\r\n    }\r\n    return [newVal]\r\n  }\r\n}\r\n\r\n// 默认的合并规则 特殊属性有其他合并方式\r\nexport function mergeOptions(oldOpt, newOpt) {\r\n  const options = {}\r\n  for (const key in oldOpt) {\r\n    mergeField(key)\r\n  }\r\n  for (const key in newOpt) {\r\n    if (!oldOpt.hasOwnProperty(key)) {\r\n      mergeField(key)\r\n    }\r\n  }\r\n  function mergeField(key) {\r\n    if (strats[key]) {\r\n      return options[key] = strats[key](oldOpt[key], newOpt[key]) // ?\r\n    }\r\n    if (typeof oldOpt[key] === 'object' && typeof newOpt[key] === 'object') {\r\n      options[key] = {\r\n        ...oldOpt[key],\r\n        ...newOpt[key],\r\n      }\r\n    } else if (newOpt[key] === null || newOpt[key] === undefined) {\r\n      options[key] = oldOpt[key]\r\n    } else {\r\n      options[key] = newOpt[key]\r\n    }\r\n  }\r\n  return options\r\n}\r\n","// 重新数组的常用API\r\n// push shfit unshift pop reverse sort splice 会导致数组本身产生变化的API都要处理\r\n\r\nconst oldArrayPrototye = Array.prototype\r\n\r\nexport const arrayMethods = Object.create(oldArrayPrototye) // 自定义的数组方法 继承 数组API\r\n\r\nconst methods = [\r\n  'push',\r\n  'shift',\r\n  'unshift',\r\n  'pop',\r\n  'reverse',\r\n  'sort',\r\n  'splice',\r\n]\r\n\r\nmethods.forEach((method) => {\r\n  arrayMethods[method] = function (...args) {\r\n    const result = oldArrayPrototye[method].apply(this, args) // this指向value？？？\r\n    const ob = this.__ob__\r\n    // 不管删除类的API，只看添加或者修改数组的API\r\n    let inserted // 用户插入的元素\r\n    switch (method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args\r\n        break\r\n      case 'splice': // 删除 修改 新增 arr.splice(0,1, {name: 1}) // 获取 {name: 1}\r\n        inserted = args.slice(2)\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    if (inserted) ob.observerArray(inserted) // 观察新插入的对象\r\n    ob.dep.notify() // 数组dep更新\r\n    return result\r\n  }\r\n})\r\n","let id = 0\r\nclass Dep { // depend和notify方法用到了观察者模式\r\n  constructor() {\r\n    this.id = id++\r\n    this.subs = []\r\n  }\r\n\r\n  depend() {\r\n    // 添加Dep.target和dep的互相记忆关系\r\n    console.log('depend触发', this)\r\n    Dep.target.addDep(this)\r\n  }\r\n\r\n  notify() {\r\n    this.subs.forEach((watcher) => {\r\n      watcher.update()\r\n    })\r\n  }\r\n\r\n  addSub(watcher) { //  dep 关联 watcher\r\n    this.subs.push(watcher)\r\n  }\r\n}\r\n\r\nconst stack = [] // 是用来存放dep.target 保留和移除watcher\r\n\r\nexport function pushTarget(watcher) {\r\n  Dep.target = watcher\r\n  stack.push(Dep.target)\r\n}\r\n\r\nexport function popTarget() {\r\n  stack.pop()\r\n  Dep.target = stack[stack.length - 1] // Dep.target的值会变成undefined\r\n}\r\n\r\nexport default Dep\r\n","import { isObject, def } from '../util/index.js'\r\nimport { arrayMethods } from './array.js'\r\nimport Dep from './dep'\r\n\r\n// 要承载比较多的方法\r\n// 当值是数组的时候，索引也会作为key去监听 get 0() get 1()这样是无意义的操作，也会拖慢性能\r\nclass Observer {\r\n  constructor(value) {\r\n    // 为了给数组也添加观察者\r\n    this.dep = new Dep()\r\n    // 把new Observer(data)存放在每一个被监控的对象里 方便复写的数组API能调用观察者的方法\r\n    // value.__ob__ = this 这是错误的写法，因为定义的__ob__也是一个对象，会造成无限生成__ob__,并无限观察它。解决方法是\r\n    // Object.defineProperty 不可枚举 不可复写 已封装到def里\r\n    def(value, '__ob__', this)\r\n    if (Array.isArray(value)) {\r\n      // 直接操作数组API的方式，大多数都不是通过操作索引\r\n      // vm._data.testArr.push({ c: 1 }) 这种操作在没处理的结果是，新增的对象没添加观察，所以要改写数组的常用API，比如push、unshift、shift\r\n      // 如果数组里面有对象，才会对数组观察，否则是不必要浪费性能的\r\n      Object.setPrototypeOf(value, arrayMethods)\r\n      this.observerArray(value)\r\n    } else {\r\n      this.walk(value)\r\n    }\r\n  }\r\n\r\n  // 为什么不在class里继续定义defineReactive 而是新开了一个functio  @question\r\n  // defineReactive(data) {}\r\n  walk(data) {\r\n    // 递归 Object.defineProperty 添加get set\r\n    const keys = Object.keys(data)\r\n    keys.forEach((key) => {\r\n      defineReactive(data, key, data[key])\r\n    })\r\n  }\r\n\r\n  observerArray(value) {\r\n    // 观察数组\r\n    value.forEach((item) => {\r\n      observe(item)\r\n    })\r\n  }\r\n}\r\n\r\nfunction defineReactive(data, key, value) {\r\n  // 定义响应式数据 让对象的数据添加getter和setter 并在期间设置了观察者\r\n  const dep = new Dep()\r\n  const childObj = observe(value) // value可能是数组，也可能是对象\r\n  Object.defineProperty(data, key, {\r\n    configurable: true,\r\n    enumerable: true,\r\n    get() {\r\n      // 这里可以设置watcher ，每个属性都有对应自己的watcher\r\n      if (Dep.target) {\r\n        console.log(Dep.target)\r\n        // 如果当前有watcher\r\n        dep.depend()\r\n        if (childObj && childObj.dep) {\r\n          console.log('childObj.dep')\r\n          childObj.dep.depend() // 收集了数组的依赖\r\n          if (Array.isArray(value)) {\r\n            // 如果数组中还有数组\r\n            dependArray(value)\r\n          }\r\n        }\r\n        // console.log('dep.subs: ', dep.subs)\r\n      }\r\n      return value\r\n    },\r\n    set(newVal) {\r\n      if (newVal === value) {\r\n        return\r\n      }\r\n      // 如果用户手动设置更新了data的对象，那么也要给新对象上的数据进行数据劫持\r\n      observe(newVal)\r\n      value = newVal\r\n      dep.notify() // 通知依赖的watcher进行更新\r\n    },\r\n  })\r\n}\r\n\r\nfunction dependArray(value) {\r\n  console.log('dependArray')\r\n  // 数组中的数组依赖\r\n  for (let i = 0; i < value.length; i++) {\r\n    const current = value[i]\r\n    current.__ob__ && current.__ob__.dep.depend()\r\n    if (Array.isArray(current)) {\r\n      dependArray(current)\r\n    }\r\n  }\r\n}\r\n\r\nexport function observe(data) {\r\n  // 如果不是对象的话，就可以直接退出了\r\n  if (!isObject(data)) {\r\n    return\r\n  }\r\n  return new Observer(data)\r\n}\r\n","import { observe } from './observer/index.js'\r\nimport { proxy } from './util/index.js'\r\n\r\nexport function initState(vm) {\r\n  const opts = vm.$options\r\n\r\n  // vue文件的 script层 编写顺序 prop data computed watch 生命周期 method 针对传入实例的对应属性做不同的处理\r\n  if (opts.props) {\r\n    initProps(vm)\r\n  }\r\n  if (opts.methods) {\r\n    initMethod(vm)\r\n  }\r\n  if (opts.data) {\r\n    initData(vm)\r\n  }\r\n  if (opts.computed) {\r\n    initComputed(vm)\r\n  }\r\n  if (opts.watch) {\r\n    initWatch(vm)\r\n  }\r\n}\r\n\r\nfunction initProps() { }\r\nfunction initMethod() { }\r\n\r\nfunction initData(vm) {\r\n  // 数据初始化工作\r\n  let { data } = vm.$options\r\n  data = vm._data = typeof (data) === 'function' ? data.call(vm) : data\r\n\r\n  // MVVM 数据劫持 数据驱动视图更新 vue2.0是Object.defineProperty getter setter vue3 proxy\r\n  // vm.data.*** => vm.*** 取数据方便\r\n\r\n  for (const key in data) {\r\n    proxy(vm, '_data', key)\r\n  }\r\n\r\n  observe(data)\r\n}\r\nfunction initComputed() { }\r\nfunction initWatch() { }\r\n","// 模板字符串：\r\n// <div id=\"app\">\r\n//  <p>{{name}}</p>\r\n// </div>\r\n\r\n// 此文件的作用是将template的html字符串转成AST结构\r\n\r\n// 需要的正则\r\nconst ncname = '[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*' // abc-aaa\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})` // <aa:bb>\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`) // 标签开头的正则 <sss 捕获的内容是标签名\r\nconst startTagClose = /^\\s*(\\/?)>/ // 匹配标签结束的 >  <div>\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`) // 匹配标签结尾的 </div>\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/ // 匹配属性 id=\"idName\"\r\n\r\nlet root = null // ast语法树的树根\r\nlet currentParent // 标识当前父亲\r\nconst stack = [] // 标签字符串数组\r\nconst ELEMENT_TYPE = 1 //\r\nconst TEXT_TYPE = 3 //\r\n\r\nfunction createASTElement(tagName, attrs) {\r\n  return {\r\n    tag: tagName,\r\n    type: ELEMENT_TYPE,\r\n    children: [],\r\n    attrs,\r\n    parent: null,\r\n  }\r\n}\r\n\r\nfunction start(tagName, attrs) { // 记录开始标签 ，并生成AST树\r\n  const element = createASTElement(tagName, attrs)\r\n  if (!root) {\r\n    root = element\r\n  }\r\n  currentParent = element // 当前元素标记成父AST树\r\n  stack.push(element)\r\n}\r\n\r\nfunction chars(text) { // 文本是 text\r\n  text = text.replace(/\\s/g, '') // 替换所有的空格为空\r\n  if (text) {\r\n    currentParent.children.push({\r\n      text,\r\n      type: TEXT_TYPE,\r\n    })\r\n  }\r\n}\r\n\r\nfunction end(tagName) { // 标签闭合 tagName\r\n  // console.log(\r\n  const element = stack.pop() // 拿到栈中的最后一个元素\r\n  currentParent = stack[stack.length - 1] // 取栈中的最后一个元素 的父级元素\r\n  if (currentParent) {\r\n    element.parent = currentParent\r\n    currentParent.children.push(element)\r\n  }\r\n}\r\n\r\n// advance(***[0].length) 是regExp.match匹配返回第一个参数\r\nexport function parserHTML(html) { // 解析HTMLDOM文本 => DOM树（包含属性、子节点、父节点）\r\n  function parsestartTag() { // 解析开始标签\r\n    const start = html.match(startTagOpen) // 匹配开始标签头\r\n    if (start) {\r\n      advance(start[0].length) // start[0]: <div  将标签从模板字符串中删除\r\n      const match = {\r\n        tagName: start[1], // 'div'\r\n        attrs: [],\r\n      }\r\n      let end; let\r\n        attr\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) { // 如果剩下的匹配不到结束标签，则视为有属性，处理属性值的返回\r\n        advance(attr[0].length) // 将开始标签的属性从模板字符串中删除\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5],\r\n        })\r\n      }\r\n      if (end) {\r\n        advance(end[0].length) // 删除开始标签的>\r\n        return match // 这才是真正return到外面的结果\r\n      }\r\n    }\r\n  }\r\n  function advance(n) { // 前进n位 处理html解析的不断更新字符串\r\n    html = html.substring(n)\r\n  }\r\n\r\n  while (html) { // while 只要循环条件为真，一直执行的特点\r\n    const textEnd = html.indexOf('<')\r\n    if (textEnd === 0) { // 是标签的左边 包含开始标签 和结束标签\r\n      const startTagMatch = parsestartTag() // startTagMatch 包含tagName attrs\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue // 开始标签匹配完毕后  继续下一次 匹配\r\n      }\r\n      const endTagMatch = html.match(endTag)\r\n      if (endTagMatch) {\r\n        advance(endTagMatch[0].length)\r\n        end(endTagMatch.tagName)\r\n        continue\r\n      }\r\n    }\r\n    let text\r\n    if (textEnd >= 0) { // 包含空白节点的情况\r\n      text = html.substring(0, textEnd)\r\n    }\r\n    if (text) {\r\n      chars(text)\r\n      advance(text.length)\r\n    }\r\n  }\r\n\r\n  return root\r\n}\r\n","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // {{ddd}}\r\n\r\nexport function generate(el) { // el 是AST语法树\r\n  const children = genChildren(el)\r\n  const code = `_c(\"${el.tag}\",\r\n        ${el.attrs.length ? genProps(el.attrs) : undefined // 设置标签属性时 有属性取属性否则取undefined\r\n}\r\n        ${children ? `,${children}` : ''\r\n})\r\n    `\r\n  return code\r\n}\r\n\r\nfunction genChildren(el) { // 生成孩子 el.chilren 是可以使用的\r\n  const { children } = el\r\n  if (children && children.length) {\r\n    return `${children.map((c) => gen(c)).join(',')}`\r\n  }\r\n  return false\r\n}\r\n\r\nfunction gen(node) { // node type 1 3 区别是元素节点还是文本节点 递归思想\r\n  if (node.type === 1) {\r\n    return generate(node)\r\n  }\r\n  const { text } = node\r\n  // 到这一步仍需处理text 可能存在{{}}语法\r\n  // a {{name}} b {{age}} c\r\n  // 转化成\r\n  // _v(\"a\" + _S(name) + \"b\" + _s(age) + \"c\")\r\n  // 正则存在lastIndex的问题，需重置为0 ？？？\r\n  // 正则 exec 0: \"{{name}}\" 1: \"name\" index匹配文本的第一个字符的位置\r\n  const tokens = [] // 待拼接的字符串数组\r\n  let match; let\r\n    index\r\n  let lastIndex = defaultTagRE.lastIndex = 0\r\n\r\n  while (match = defaultTagRE.exec(text)) {\r\n    index = match.index\r\n    if (index > lastIndex) {\r\n      tokens.push(JSON.stringify(text.slice(lastIndex, index)))\r\n    }\r\n    tokens.push(`_s(${match[1].trim()})`)\r\n    lastIndex = index + match[0].length\r\n  }\r\n  if (lastIndex < text.length) {\r\n    tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n  }\r\n  return `_v(${tokens.join('+')})`\r\n}\r\n\r\nfunction genProps(attrs) { // 生成属性  attrs:[{name: id, value: '**'}] => 多个{id: **}\r\n  let str = ''\r\n  attrs.forEach((item) => {\r\n    if (item.name === 'style') {\r\n      const obj = {}\r\n      item.value.split(';').forEach((styleItem) => {\r\n        if (styleItem) {\r\n          const splitItem = styleItem.split(':')\r\n          obj[splitItem[0]] = splitItem[1]\r\n        }\r\n      })\r\n      str += `style: ${JSON.stringify(obj)},`\r\n    } else {\r\n      str += `${item.name}:${JSON.stringify(item.value)},`\r\n    }\r\n  })\r\n  // return `{${str.substring(0, str.length - 1)}}`\r\n  return `{${str.slice(0, -1)}}`\r\n}\r\n","// AST 虚拟dom\r\nimport { parserHTML } from './parser-html'\r\nimport { generate } from './generate'\r\n\r\nexport function compileToFunction(template) {\r\n  // (1) 解析html字符串 => AST语法树\r\n  const root = parserHTML(template)\r\n  // AST语法树 => render函数\r\n  // 原理：模版引擎？？？\r\n\r\n  // html字符串： <div id=\"app\"><p>hello {{name}}</p> test</div>\r\n  // render函数： _c(\"div\", {id: app}, _c(\"p\", undefined, _v('hello' + _s(name))), _v('hello'))\r\n\r\n  const code = generate(root)\r\n  // 所有的模板引擎的实现 底层原理  new Function () {}  with\r\n\r\n  const renderFn = new Function(`with(this){ return ${code}}`)\r\n\r\n  // renderFn返回的是虚拟dom\r\n  return renderFn\r\n}\r\n","const callbackArr = []\r\n// nextTick原理 把用户的操作放到异步进程的最后执行，就可保证一定是最新的数据\r\n// [flushSchedularQueue, userNextTick]\r\n\r\nlet waiting = false // 多次调用nextTick，没有刷新队列的时候，先放到数组中，加入等待状态 刷新后再盖比那等待状态\r\n\r\nfunction flushCallBack() {\r\n  callbackArr.forEach((cb) => cb())\r\n  waiting = false\r\n}\r\n\r\n// eslint-disable-next-line no-undef\r\nexport function nextTick(cb) {\r\n  callbackArr.push(cb)\r\n  if (waiting === false) {\r\n    setTimeout(flushCallBack, 0)\r\n    waiting = true\r\n  }\r\n}\r\n","import { nextTick } from '../util/next-tick'\r\n\r\nlet queue = []\r\nlet has = {}\r\n/*\r\n    解决场景：\r\n    vm.testArr.push(1)\r\n    vm.testArr.push(2)\r\n    vm.testArr.push(3)\r\n    vm.testArr.push(4)\r\n    update四次，其实应该是同一个watcher，只update一次就够了\r\n*/\r\n\r\nfunction flushSchedularQueue() {\r\n  queue.forEach((watcher) => watcher.run())\r\n  queue = []\r\n  has = {}\r\n}\r\n\r\nexport function queueWatcher(watcher) { // 队列更新\r\n  const { id } = watcher\r\n  if (!has[id]) {\r\n    queue.push(watcher)\r\n    has[id] = true\r\n    // Vue.nextTick\r\n    // promise / mutationObserver / setImmediate / setTimeout\r\n    nextTick(flushSchedularQueue)\r\n  }\r\n}\r\n","import Dep, { pushTarget, popTarget } from './dep'\r\nimport { queueWatcher } from './schedular'\r\n\r\nlet id = 0\r\nclass Watcher {\r\n  constructor(vm, exprOrFn, callback, options) { // 所有属性都放在实例上\r\n    this.vm = vm\r\n    this.callback = callback\r\n    this.options = options\r\n    // eslint-disable-next-line no-plusplus\r\n    this.id = id++ // 保持watcher的唯一性\r\n    this.getter = exprOrFn\r\n    this.depsId = new Set()\r\n    this.deps = [] // 存放唯一的dep\r\n    this.get()\r\n  }\r\n\r\n  get() {\r\n    // 不直接调用 exprOrFn 的原因是，调用的基础上，还有额外的操作 存储和移除watcher\r\n    pushTarget(this) // water存起来， Dep.target\r\n    this.getter() // 执行 exprOrFn\r\n    popTarget() // 移除全局watcher Dep.target\r\n  }\r\n\r\n  update() { // watcher的update方法，在dep的观察者更新时候会调用\r\n    // 考虑一种情况：操作的都是同一个属性，建立的watcher是同一个watcher，watcher 的id是一样的，然后update好几次。\r\n    // 需要弄一个队列更新\r\n    // console.log(this.id);\r\n    queueWatcher(this)\r\n    // this.get()\r\n  }\r\n\r\n  run() {\r\n    this.get()\r\n  }\r\n\r\n  addDep(dep) { // watcher关联dep dep里不能放重复的watcher watcher里不能发重复的dep\r\n    const { id } = dep // set结构存储它 set结构可以去重\r\n    if (!this.depsId.has(id)) {\r\n      this.depsId.add(id)\r\n      this.deps.push(dep)\r\n      dep.addSub(this) // dep 关联 watcher\r\n    }\r\n  }\r\n}\r\n\r\nexport default Watcher\r\n","export function patch(oldVnode, vnode) {\r\n    // 第一次oldVnode 是标签\r\n    // 1 判断是更新还是渲染\r\n    const isRealElement = oldVnode.nodeType\r\n    if (isRealElement) {\r\n        const oldElm = oldVnode\r\n        const parentElm = oldElm.parentNode // 获取父级节点是为了提前存好插入的位置\r\n        let el = createElm(vnode)\r\n        parentElm.insertBefore(el, oldElm.nextSibling)\r\n        parentElm.removeChild(oldElm)\r\n        return el\r\n    }\r\n}\r\n\r\nfunction createElm(vnode) {\r\n    //return document.createElement('div')\r\n    let {\r\n        tag,\r\n        children,\r\n        key,\r\n        data,\r\n        text\r\n    } = vnode // 是标签或创建标签\r\n\r\n    // 标签\r\n    if (typeof tag === 'string') {\r\n        vnode.el = document.createElement(tag)\r\n        updateProperties(vnode)\r\n        children.forEach(child => { // 递归创建儿子节点\r\n            return vnode.el.appendChild(createElm(child))\r\n        });\r\n    } else { // 文本    \r\n        vnode.el = document.createTextNode(text)\r\n    }\r\n    return vnode.el\r\n}\r\n\r\nfunction updateProperties(vnode) { // 更新属性\r\n    let newProps = vnode.data || {}\r\n    let el = vnode.el\r\n    for (let key in newProps) {\r\n        if (key === 'style') {\r\n            for (let styleName in newProps.style) {\r\n                el.style[styleName] = newProps.style[styleName]\r\n            }\r\n        } else if (key === 'class') {\r\n            el.className = newProps.class\r\n        } else {\r\n            el.setAttribute(key, newProps[key])\r\n        }\r\n    }\r\n}","// 生命周期\r\n// render函数生成的dom替换el\r\n\r\nimport Watcher from './observer/watcher'\r\nimport { patch } from './vdom/patch'\r\n\r\n// 定义vm._update\r\nexport function lifecycleMixin(Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this\r\n    vm.$el = patch(vm.$el, vnode) // 虚拟vnode创建真实dom 替换已有的$el\r\n  }\r\n}\r\n\r\nexport function mountComponent(vm, el) {\r\n  const options = vm.$options\r\n  vm.$el = el // $el用来存放真实dom\r\n\r\n  callHook(vm, 'beforeMount')\r\n\r\n  // 渲染页面 渲染或更新都会调用\r\n  const updateComponent = () => {\r\n    // Watcher就是用来渲染的 ??? 还有绑定监听\r\n    // vm._render 通过解析的render方法，渲染出虚拟dom _c _v _s\r\n    // vm._update 通过虚拟dom 创建真实的dom\r\n\r\n    // 渲染页面\r\n    vm._update(vm._render()) // 执行顺序是先里后外\r\n  }\r\n  // 渲染watcher 每个组件都有一个watcher vm.$watch(() => {} )   空函数是watch后的回调处理\r\n  new Watcher(vm, updateComponent, () => { }, true)\r\n  callHook(vm, 'mounted')\r\n}\r\n\r\nexport function callHook(vm, hook) {\r\n  const handlers = vm.$options[hook]\r\n  if (handlers) {\r\n    for (let i = 0; i < handlers.length; i++) {\r\n      handlers[i].call(vm)\r\n    }\r\n  }\r\n}\r\n","import { initState } from './state'\r\nimport { compileToFunction } from './compiler/index'\r\nimport { mountComponent, callHook } from './lifecycle'\r\nimport { mergeOptions } from './util/index'\r\nimport { nextTick } from './util/next-tick'\r\n\r\nexport function initMixin(Vue) {\r\n  // vue 原型添加一个init方法\r\n  Vue.prototype._init = function (options) {\r\n    // 数据劫持\r\n    const vm = this\r\n\r\n    // 子类 继承 用户传递和全局进行合并\r\n    vm.$options = mergeOptions(vm.constructor.options, options) // vue中的this.$options等于 用户传入的属性\r\n\r\n    callHook(vm, 'beforeCreate')\r\n\r\n    initState(vm) // 初始化状态\r\n\r\n    callHook(vm, 'created')\r\n\r\n    // 如果有el的参数，就渲染到节点上 template render\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el)\r\n    }\r\n  }\r\n  Vue.prototype.$mount = function (el) {\r\n    const vm = this\r\n    const options = vm.$options\r\n    el = document.querySelector(el)\r\n\r\n    // render > template > el 渲染优先级\r\n    if (!options.render) {\r\n      let { template } = options\r\n      if (!template && el) {\r\n        template = el.outerHTML\r\n      }\r\n\r\n      // template => render函数\r\n      const render = compileToFunction(template)\r\n      options.render = render\r\n    }\r\n\r\n    // 拿到render函数后 可以渲染当前组件\r\n    mountComponent(vm, el)\r\n  }\r\n  Vue.prototype.$nextTick = nextTick\r\n}\r\n","export function createElement(tag, data = {}, ...children) { // ...children是函数的rest参数写法，es6. 用于获取函数的多余参数\r\n    let key = data.key\r\n    if (key) { delete data.key }\r\n    return vnode(tag, data, key, children, undefined)\r\n}\r\n\r\nexport function createTextNode(text) {\r\n    //console.log(text);\r\n    return vnode(undefined, undefined, undefined, undefined, text)\r\n}\r\n\r\n// 虚拟节点 就是_c _v 实现用对象来描述dom的操作\r\nfunction vnode(tag, data, key, children, text) {\r\n\r\n    return {\r\n        tag,\r\n        data,\r\n        key,\r\n        children,\r\n        text\r\n    }\r\n}\r\n\r\n// vnode 通用结构  需转换成真实的html\r\n//const vnode = {\r\n//    tag: 'div',\r\n//    key: undefined,\r\n//    data: {},\r\n//    children: [],\r\n//    text: undefined\r\n//}","import { createElement, createTextNode } from './vdom/create-element'\r\n\r\nexport function renderMixin(Vue) {\r\n  // _c 创建元素的虚拟节点\r\n  // _v 创建文本的虚拟节点\r\n  // _s JSON.stringify\r\n\r\n  Vue.prototype._c = function () {\r\n    return createElement(...arguments) // tag, data, children\r\n  }\r\n\r\n  Vue.prototype._v = function (text) {\r\n    return createTextNode(text)\r\n  }\r\n\r\n  Vue.prototype._s = function (val) {\r\n    return val == null ? '' : (typeof val === 'object' ? JSON.stringify(val) : val)\r\n  }\r\n\r\n  Vue.prototype._render = function () { // render函数调用，返回的是vnode\r\n    const vm = this\r\n    const { render } = vm.$options\r\n    return render.call(vm) // 绑定this 配合with的this参数\r\n  }\r\n}\r\n","import { mergeOptions } from '../util/index'\r\n\r\nexport function initGlobalApi(Vue) {\r\n  Vue.options = {}\r\n  Vue.mixin = function (mixin) {\r\n    this.options = mergeOptions(this.options, mixin)\r\n  }\r\n  // Vue.mixin({\r\n  //    a: 1,\r\n  //    b: 2,\r\n  //    beforeCreate: function () {\r\n  //        console.log('fn1')\r\n  //    }\r\n  // })\r\n  // Vue.mixin({\r\n  //    b: 3,\r\n  //    c: 4,\r\n  //    beforeCreate: function () {\r\n  //        console.log('fn2')\r\n  //    }\r\n  // })\r\n  // console.log(Vue.options);\r\n}\r\n","import { initMixin } from './init'\r\nimport { renderMixin } from './render'\r\nimport { lifecycleMixin } from './lifecycle'\r\nimport { initGlobalApi } from './initGlobalAPI/index'\r\n\r\nfunction Vue(options) {\r\n  // vue的初始化操作\r\n  this._init(options)\r\n}\r\ninitMixin(Vue)\r\nrenderMixin(Vue)\r\nlifecycleMixin(Vue)\r\ninitGlobalApi(Vue)\r\n\r\nexport default Vue\r\n"],"names":["isObject","data","def","key","value","Object","defineProperty","enumerable","configurable","proxy","vm","source","get","set","newVal","LIFECYCLE_HOOKS","strats","forEach","hook","mergeHook","oldVal","concat","mergeOptions","oldOpt","newOpt","options","mergeField","hasOwnProperty","undefined","oldArrayPrototye","Array","prototype","arrayMethods","create","methods","method","args","result","apply","ob","__ob__","inserted","slice","observerArray","dep","notify","id","Dep","subs","console","log","target","addDep","watcher","update","push","stack","pushTarget","popTarget","pop","length","Observer","isArray","setPrototypeOf","walk","keys","defineReactive","item","observe","childObj","depend","dependArray","i","current","initState","opts","$options","props","initData","computed","watch","_data","call","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","attribute","root","currentParent","ELEMENT_TYPE","TEXT_TYPE","createASTElement","tagName","attrs","tag","type","children","parent","start","element","chars","text","replace","end","parserHTML","html","parsestartTag","match","advance","attr","name","n","substring","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRE","generate","el","genChildren","code","genProps","map","c","gen","join","node","tokens","index","lastIndex","exec","JSON","stringify","trim","str","obj","split","styleItem","splitItem","compileToFunction","template","renderFn","Function","callbackArr","waiting","flushCallBack","cb","nextTick","setTimeout","queue","has","flushSchedularQueue","run","queueWatcher","Watcher","exprOrFn","callback","getter","depsId","Set","deps","add","addSub","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","child","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","lifecycleMixin","Vue","_update","$el","mountComponent","callHook","updateComponent","_render","handlers","initMixin","_init","constructor","$mount","querySelector","render","outerHTML","$nextTick","renderMixin","_c","arguments","_v","_s","val","initGlobalApi","mixin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA;EACO,SAASA,QAAT,CAAkBC,IAAlB,EAAwB;EAC7B,SAAO,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,KAAK,IAA5C;EACD;;EAGM,SAASC,GAAT,CAAaD,IAAb,EAAmBE,GAAnB,EAAwBC,KAAxB,EAA+B;EACpCC,EAAAA,MAAM,CAACC,cAAP,CAAsBL,IAAtB,EAA4BE,GAA5B,EAAiC;EAC/BI,IAAAA,UAAU,EAAE,KADmB;EAE/BC,IAAAA,YAAY,EAAE,KAFiB;EAG/BJ,IAAAA,KAAK,EAALA;EAH+B,GAAjC;EAKD;EAEM,SAASK,KAAT,CAAeC,EAAf,EAAmBC,MAAnB,EAA2BR,GAA3B,EAAgC;EAAE;EACvCE,EAAAA,MAAM,CAACC,cAAP,CAAsBI,EAAtB,EAA0BP,GAA1B,EAA+B;EAC7BS,IAAAA,GAD6B,iBACvB;EACJ,aAAOF,EAAE,CAACC,MAAD,CAAF,CAAWR,GAAX,CAAP;EACD,KAH4B;EAI7BU,IAAAA,GAJ6B,eAIzBC,MAJyB,EAIjB;EACVJ,MAAAA,EAAE,CAACC,MAAD,CAAF,CAAWR,GAAX,IAAkBW,MAAlB;EACD;EAN4B,GAA/B;EAQD;EAED,IAAMC,eAAe,GAAG;EACtB,cADsB,EAEtB,SAFsB,EAGtB,aAHsB,EAItB,SAJsB,EAKtB,cALsB,EAMtB,SANsB,EAOtB,eAPsB,EAQtB,WARsB,CAAxB;EAWA,IAAMC,MAAM,GAAG,EAAf;EAEAD,eAAe,CAACE,OAAhB,CAAwB,UAACC,IAAD,EAAU;EAChCF,EAAAA,MAAM,CAACE,IAAD,CAAN,GAAeC,SAAf;EACD,CAFD;;EAIA,SAASA,SAAT,CAAmBC,MAAnB,EAA2BN,MAA3B,EAAmC;EACjC,MAAIA,MAAJ,EAAY;EACV,QAAIM,MAAJ,EAAY;EACV,aAAOA,MAAM,CAACC,MAAP,CAAcP,MAAd,CAAP;EACD;;EACD,WAAO,CAACA,MAAD,CAAP;EACD;EACF;;;EAGM,SAASQ,YAAT,CAAsBC,MAAtB,EAA8BC,MAA9B,EAAsC;EAC3C,MAAMC,OAAO,GAAG,EAAhB;;EACA,OAAK,IAAMtB,GAAX,IAAkBoB,MAAlB,EAA0B;EACxBG,IAAAA,UAAU,CAACvB,GAAD,CAAV;EACD;;EACD,OAAK,IAAMA,IAAX,IAAkBqB,MAAlB,EAA0B;EACxB,QAAI,CAACD,MAAM,CAACI,cAAP,CAAsBxB,IAAtB,CAAL,EAAiC;EAC/BuB,MAAAA,UAAU,CAACvB,IAAD,CAAV;EACD;EACF;;EACD,WAASuB,UAAT,CAAoBvB,GAApB,EAAyB;EACvB,QAAIa,MAAM,CAACb,GAAD,CAAV,EAAiB;EACf,aAAOsB,OAAO,CAACtB,GAAD,CAAP,GAAea,MAAM,CAACb,GAAD,CAAN,CAAYoB,MAAM,CAACpB,GAAD,CAAlB,EAAyBqB,MAAM,CAACrB,GAAD,CAA/B,CAAtB,CADe;EAEhB;;EACD,QAAI,QAAOoB,MAAM,CAACpB,GAAD,CAAb,MAAuB,QAAvB,IAAmC,QAAOqB,MAAM,CAACrB,GAAD,CAAb,MAAuB,QAA9D,EAAwE;EACtEsB,MAAAA,OAAO,CAACtB,GAAD,CAAP,qCACKoB,MAAM,CAACpB,GAAD,CADX,GAEKqB,MAAM,CAACrB,GAAD,CAFX;EAID,KALD,MAKO,IAAIqB,MAAM,CAACrB,GAAD,CAAN,KAAgB,IAAhB,IAAwBqB,MAAM,CAACrB,GAAD,CAAN,KAAgByB,SAA5C,EAAuD;EAC5DH,MAAAA,OAAO,CAACtB,GAAD,CAAP,GAAeoB,MAAM,CAACpB,GAAD,CAArB;EACD,KAFM,MAEA;EACLsB,MAAAA,OAAO,CAACtB,GAAD,CAAP,GAAeqB,MAAM,CAACrB,GAAD,CAArB;EACD;EACF;;EACD,SAAOsB,OAAP;EACD;;EC9ED;EACA;EAEA,IAAMI,gBAAgB,GAAGC,KAAK,CAACC,SAA/B;EAEO,IAAMC,YAAY,GAAG3B,MAAM,CAAC4B,MAAP,CAAcJ,gBAAd,CAArB;;EAEP,IAAMK,OAAO,GAAG,CACd,MADc,EAEd,OAFc,EAGd,SAHc,EAId,KAJc,EAKd,SALc,EAMd,MANc,EAOd,QAPc,CAAhB;EAUAA,OAAO,CAACjB,OAAR,CAAgB,UAACkB,MAAD,EAAY;EAC1BH,EAAAA,YAAY,CAACG,MAAD,CAAZ,GAAuB,YAAmB;EAAA,sCAANC,IAAM;EAANA,MAAAA,IAAM;EAAA;;EACxC,QAAMC,MAAM,GAAGR,gBAAgB,CAACM,MAAD,CAAhB,CAAyBG,KAAzB,CAA+B,IAA/B,EAAqCF,IAArC,CAAf,CADwC;;EAExC,QAAMG,EAAE,GAAG,KAAKC,MAAhB,CAFwC;;EAIxC,QAAIC,QAAJ,CAJwC;;EAKxC,YAAQN,MAAR;EACE,WAAK,MAAL;EACA,WAAK,SAAL;EACEM,QAAAA,QAAQ,GAAGL,IAAX;EACA;;EACF,WAAK,QAAL;EAAe;EACbK,QAAAA,QAAQ,GAAGL,IAAI,CAACM,KAAL,CAAW,CAAX,CAAX;EACA;EAPJ;;EAWA,QAAID,QAAJ,EAAcF,EAAE,CAACI,aAAH,CAAiBF,QAAjB,EAhB0B;;EAiBxCF,IAAAA,EAAE,CAACK,GAAH,CAAOC,MAAP,GAjBwC;;EAkBxC,WAAOR,MAAP;EACD,GAnBD;EAoBD,CArBD;;ECjBA,IAAIS,IAAE,GAAG,CAAT;;MACMC;EAAM;EACV,iBAAc;EAAA;;EACZ,SAAKD,EAAL,GAAUA,IAAE,EAAZ;EACA,SAAKE,IAAL,GAAY,EAAZ;EACD;;;;aAED,kBAAS;EACP;EACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwB,IAAxB;EACAH,MAAAA,GAAG,CAACI,MAAJ,CAAWC,MAAX,CAAkB,IAAlB;EACD;;;aAED,kBAAS;EACP,WAAKJ,IAAL,CAAU/B,OAAV,CAAkB,UAACoC,OAAD,EAAa;EAC7BA,QAAAA,OAAO,CAACC,MAAR;EACD,OAFD;EAGD;;;aAED,gBAAOD,OAAP,EAAgB;EAAE;EAChB,WAAKL,IAAL,CAAUO,IAAV,CAAeF,OAAf;EACD;;;;;;EAGH,IAAMG,OAAK,GAAG,EAAd;;EAEO,SAASC,UAAT,CAAoBJ,OAApB,EAA6B;EAClCN,EAAAA,GAAG,CAACI,MAAJ,GAAaE,OAAb;EACAG,EAAAA,OAAK,CAACD,IAAN,CAAWR,GAAG,CAACI,MAAf;EACD;EAEM,SAASO,SAAT,GAAqB;EAC1BF,EAAAA,OAAK,CAACG,GAAN;EACAZ,EAAAA,GAAG,CAACI,MAAJ,GAAaK,OAAK,CAACA,OAAK,CAACI,MAAN,GAAe,CAAhB,CAAlB,CAF0B;EAG3B;;EC7BD;;MACMC;EACJ,oBAAYzD,KAAZ,EAAmB;EAAA;;EACjB;EACA,SAAKwC,GAAL,GAAW,IAAIG,GAAJ,EAAX,CAFiB;EAIjB;EACA;;EACA7C,IAAAA,GAAG,CAACE,KAAD,EAAQ,QAAR,EAAkB,IAAlB,CAAH;;EACA,QAAI0B,KAAK,CAACgC,OAAN,CAAc1D,KAAd,CAAJ,EAA0B;EACxB;EACA;EACA;EACAC,MAAAA,MAAM,CAAC0D,cAAP,CAAsB3D,KAAtB,EAA6B4B,YAA7B;EACA,WAAKW,aAAL,CAAmBvC,KAAnB;EACD,KAND,MAMO;EACL,WAAK4D,IAAL,CAAU5D,KAAV;EACD;EACF;EAGD;;;;;aACA,cAAKH,IAAL,EAAW;EACT;EACA,UAAMgE,IAAI,GAAG5D,MAAM,CAAC4D,IAAP,CAAYhE,IAAZ,CAAb;EACAgE,MAAAA,IAAI,CAAChD,OAAL,CAAa,UAACd,GAAD,EAAS;EACpB+D,QAAAA,cAAc,CAACjE,IAAD,EAAOE,GAAP,EAAYF,IAAI,CAACE,GAAD,CAAhB,CAAd;EACD,OAFD;EAGD;;;aAED,uBAAcC,KAAd,EAAqB;EACnB;EACAA,MAAAA,KAAK,CAACa,OAAN,CAAc,UAACkD,IAAD,EAAU;EACtBC,QAAAA,OAAO,CAACD,IAAD,CAAP;EACD,OAFD;EAGD;;;;;;EAGH,SAASD,cAAT,CAAwBjE,IAAxB,EAA8BE,GAA9B,EAAmCC,KAAnC,EAA0C;EACxC;EACA,MAAMwC,GAAG,GAAG,IAAIG,GAAJ,EAAZ;EACA,MAAMsB,QAAQ,GAAGD,OAAO,CAAChE,KAAD,CAAxB,CAHwC;;EAIxCC,EAAAA,MAAM,CAACC,cAAP,CAAsBL,IAAtB,EAA4BE,GAA5B,EAAiC;EAC/BK,IAAAA,YAAY,EAAE,IADiB;EAE/BD,IAAAA,UAAU,EAAE,IAFmB;EAG/BK,IAAAA,GAH+B,iBAGzB;EACJ;EACA,UAAImC,GAAG,CAACI,MAAR,EAAgB;EACdF,QAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,MAAhB,EADc;;EAGdP,QAAAA,GAAG,CAAC0B,MAAJ;;EACA,YAAID,QAAQ,IAAIA,QAAQ,CAACzB,GAAzB,EAA8B;EAC5BK,UAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;EACAmB,UAAAA,QAAQ,CAACzB,GAAT,CAAa0B,MAAb,GAF4B;;EAG5B,cAAIxC,KAAK,CAACgC,OAAN,CAAc1D,KAAd,CAAJ,EAA0B;EACxB;EACAmE,YAAAA,WAAW,CAACnE,KAAD,CAAX;EACD;EACF,SAXa;;EAaf;;EACD,aAAOA,KAAP;EACD,KApB8B;EAqB/BS,IAAAA,GArB+B,eAqB3BC,MArB2B,EAqBnB;EACV,UAAIA,MAAM,KAAKV,KAAf,EAAsB;EACpB;EACD,OAHS;;;EAKVgE,MAAAA,OAAO,CAACtD,MAAD,CAAP;EACAV,MAAAA,KAAK,GAAGU,MAAR;EACA8B,MAAAA,GAAG,CAACC,MAAJ,GAPU;EAQX;EA7B8B,GAAjC;EA+BD;;EAED,SAAS0B,WAAT,CAAqBnE,KAArB,EAA4B;EAC1B6C,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAD0B;;EAG1B,OAAK,IAAIsB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpE,KAAK,CAACwD,MAA1B,EAAkCY,CAAC,EAAnC,EAAuC;EACrC,QAAMC,OAAO,GAAGrE,KAAK,CAACoE,CAAD,CAArB;EACAC,IAAAA,OAAO,CAACjC,MAAR,IAAkBiC,OAAO,CAACjC,MAAR,CAAeI,GAAf,CAAmB0B,MAAnB,EAAlB;;EACA,QAAIxC,KAAK,CAACgC,OAAN,CAAcW,OAAd,CAAJ,EAA4B;EAC1BF,MAAAA,WAAW,CAACE,OAAD,CAAX;EACD;EACF;EACF;;EAEM,SAASL,OAAT,CAAiBnE,IAAjB,EAAuB;EAC5B;EACA,MAAI,CAACD,QAAQ,CAACC,IAAD,CAAb,EAAqB;EACnB;EACD;;EACD,SAAO,IAAI4D,QAAJ,CAAa5D,IAAb,CAAP;EACD;;EC/FM,SAASyE,SAAT,CAAmBhE,EAAnB,EAAuB;EAC5B,MAAMiE,IAAI,GAAGjE,EAAE,CAACkE,QAAhB,CAD4B;;EAI5B,MAAID,IAAI,CAACE,KAAT,EAAgB;;EAGhB,MAAIF,IAAI,CAACzC,OAAT,EAAkB;;EAGlB,MAAIyC,IAAI,CAAC1E,IAAT,EAAe;EACb6E,IAAAA,QAAQ,CAACpE,EAAD,CAAR;EACD;;EACD,MAAIiE,IAAI,CAACI,QAAT,EAAmB;;EAGnB,MAAIJ,IAAI,CAACK,KAAT,EAAgB;EAGjB;;EAKD,SAASF,QAAT,CAAkBpE,EAAlB,EAAsB;EACpB;EACA,MAAMT,IAAN,GAAeS,EAAE,CAACkE,QAAlB,CAAM3E,IAAN;EACAA,EAAAA,IAAI,GAAGS,EAAE,CAACuE,KAAH,GAAW,OAAQhF,IAAR,KAAkB,UAAlB,GAA+BA,IAAI,CAACiF,IAAL,CAAUxE,EAAV,CAA/B,GAA+CT,IAAjE,CAHoB;EAMpB;;EAEA,OAAK,IAAME,GAAX,IAAkBF,IAAlB,EAAwB;EACtBQ,IAAAA,KAAK,CAACC,EAAD,EAAK,OAAL,EAAcP,GAAd,CAAL;EACD;;EAEDiE,EAAAA,OAAO,CAACnE,IAAD,CAAP;EACD;;ECxCD;EACA;EACA;EACA;EAEA;EAEA;EACA,IAAMkF,MAAM,GAAG,8BAAf;;EACA,IAAMC,YAAY,iBAAUD,MAAV,kBAAwBA,MAAxB,MAAlB;;EACA,IAAME,YAAY,GAAG,IAAIC,MAAJ,aAAgBF,YAAhB,EAArB;;EACA,IAAMG,aAAa,GAAG,YAAtB;;EACA,IAAMC,MAAM,GAAG,IAAIF,MAAJ,gBAAmBF,YAAnB,YAAf;;EACA,IAAMK,SAAS,GAAG,2EAAlB;;EAEA,IAAIC,IAAI,GAAG,IAAX;;EACA,IAAIC,aAAJ;;EACA,IAAMnC,KAAK,GAAG,EAAd;;EACA,IAAMoC,YAAY,GAAG,CAArB;;EACA,IAAMC,SAAS,GAAG,CAAlB;;EAEA,SAASC,gBAAT,CAA0BC,OAA1B,EAAmCC,KAAnC,EAA0C;EACxC,SAAO;EACLC,IAAAA,GAAG,EAAEF,OADA;EAELG,IAAAA,IAAI,EAAEN,YAFD;EAGLO,IAAAA,QAAQ,EAAE,EAHL;EAILH,IAAAA,KAAK,EAALA,KAJK;EAKLI,IAAAA,MAAM,EAAE;EALH,GAAP;EAOD;;EAED,SAASC,KAAT,CAAeN,OAAf,EAAwBC,KAAxB,EAA+B;EAAE;EAC/B,MAAMM,OAAO,GAAGR,gBAAgB,CAACC,OAAD,EAAUC,KAAV,CAAhC;;EACA,MAAI,CAACN,IAAL,EAAW;EACTA,IAAAA,IAAI,GAAGY,OAAP;EACD;;EACDX,EAAAA,aAAa,GAAGW,OAAhB,CAL6B;;EAM7B9C,EAAAA,KAAK,CAACD,IAAN,CAAW+C,OAAX;EACD;;EAED,SAASC,KAAT,CAAeC,IAAf,EAAqB;EAAE;EACrBA,EAAAA,IAAI,GAAGA,IAAI,CAACC,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAP,CADmB;;EAEnB,MAAID,IAAJ,EAAU;EACRb,IAAAA,aAAa,CAACQ,QAAd,CAAuB5C,IAAvB,CAA4B;EAC1BiD,MAAAA,IAAI,EAAJA,IAD0B;EAE1BN,MAAAA,IAAI,EAAEL;EAFoB,KAA5B;EAID;EACF;;EAED,SAASa,GAAT,CAAaX,OAAb,EAAsB;EAAE;EACtB;EACA,MAAMO,OAAO,GAAG9C,KAAK,CAACG,GAAN,EAAhB,CAFoB;;EAGpBgC,EAAAA,aAAa,GAAGnC,KAAK,CAACA,KAAK,CAACI,MAAN,GAAe,CAAhB,CAArB,CAHoB;;EAIpB,MAAI+B,aAAJ,EAAmB;EACjBW,IAAAA,OAAO,CAACF,MAAR,GAAiBT,aAAjB;EACAA,IAAAA,aAAa,CAACQ,QAAd,CAAuB5C,IAAvB,CAA4B+C,OAA5B;EACD;EACF;;;EAGM,SAASK,UAAT,CAAoBC,IAApB,EAA0B;EAAE;EACjC,WAASC,aAAT,GAAyB;EAAE;EACzB,QAAMR,KAAK,GAAGO,IAAI,CAACE,KAAL,CAAWzB,YAAX,CAAd,CADuB;;EAEvB,QAAIgB,KAAJ,EAAW;EACTU,MAAAA,OAAO,CAACV,KAAK,CAAC,CAAD,CAAL,CAASzC,MAAV,CAAP,CADS;;EAET,UAAMkD,KAAK,GAAG;EACZf,QAAAA,OAAO,EAAEM,KAAK,CAAC,CAAD,CADF;EACO;EACnBL,QAAAA,KAAK,EAAE;EAFK,OAAd;;EAIA,UAAIU,IAAJ;;EAAS,UACPM,IADO;;EAET,aAAO,EAAEN,IAAG,GAAGE,IAAI,CAACE,KAAL,CAAWvB,aAAX,CAAR,MAAuCyB,IAAI,GAAGJ,IAAI,CAACE,KAAL,CAAWrB,SAAX,CAA9C,CAAP,EAA6E;EAAE;EAC7EsB,QAAAA,OAAO,CAACC,IAAI,CAAC,CAAD,CAAJ,CAAQpD,MAAT,CAAP,CAD2E;;EAE3EkD,QAAAA,KAAK,CAACd,KAAN,CAAYzC,IAAZ,CAAiB;EACf0D,UAAAA,IAAI,EAAED,IAAI,CAAC,CAAD,CADK;EAEf5G,UAAAA,KAAK,EAAE4G,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAf,IAAsBA,IAAI,CAAC,CAAD;EAFlB,SAAjB;EAID;;EACD,UAAIN,IAAJ,EAAS;EACPK,QAAAA,OAAO,CAACL,IAAG,CAAC,CAAD,CAAH,CAAO9C,MAAR,CAAP,CADO;;EAEP,eAAOkD,KAAP,CAFO;EAGR;EACF;EACF;;EACD,WAASC,OAAT,CAAiBG,CAAjB,EAAoB;EAAE;EACpBN,IAAAA,IAAI,GAAGA,IAAI,CAACO,SAAL,CAAeD,CAAf,CAAP;EACD;;EAED,SAAON,IAAP,EAAa;EAAE;EACb,QAAMQ,OAAO,GAAGR,IAAI,CAACS,OAAL,CAAa,GAAb,CAAhB;;EACA,QAAID,OAAO,KAAK,CAAhB,EAAmB;EAAE;EACnB,UAAME,aAAa,GAAGT,aAAa,EAAnC,CADiB;;EAEjB,UAAIS,aAAJ,EAAmB;EACjBjB,QAAAA,KAAK,CAACiB,aAAa,CAACvB,OAAf,EAAwBuB,aAAa,CAACtB,KAAtC,CAAL;EACA,iBAFiB;EAGlB;;EACD,UAAMuB,WAAW,GAAGX,IAAI,CAACE,KAAL,CAAWtB,MAAX,CAApB;;EACA,UAAI+B,WAAJ,EAAiB;EACfR,QAAAA,OAAO,CAACQ,WAAW,CAAC,CAAD,CAAX,CAAe3D,MAAhB,CAAP;EACA8C,QAAAA,GAAG,CAACa,WAAW,CAACxB,OAAb,CAAH;EACA;EACD;EACF;;EACD,QAAIS,IAAI,SAAR;;EACA,QAAIY,OAAO,IAAI,CAAf,EAAkB;EAAE;EAClBZ,MAAAA,IAAI,GAAGI,IAAI,CAACO,SAAL,CAAe,CAAf,EAAkBC,OAAlB,CAAP;EACD;;EACD,QAAIZ,IAAJ,EAAU;EACRD,MAAAA,KAAK,CAACC,IAAD,CAAL;EACAO,MAAAA,OAAO,CAACP,IAAI,CAAC5C,MAAN,CAAP;EACD;EACF;;EAED,SAAO8B,IAAP;EACD;;ECnHD,IAAM8B,YAAY,GAAG,0BAArB;;EAEO,SAASC,QAAT,CAAkBC,EAAlB,EAAsB;EAAE;EAC7B,MAAMvB,QAAQ,GAAGwB,WAAW,CAACD,EAAD,CAA5B;EACA,MAAME,IAAI,kBAAUF,EAAE,CAACzB,GAAb,0BACFyB,EAAE,CAAC1B,KAAH,CAASpC,MAAT,GAAkBiE,QAAQ,CAACH,EAAE,CAAC1B,KAAJ,CAA1B,GAAuCpE,SADrC;EAAA,yBAGFuE,QAAQ,cAAOA,QAAP,IAAoB,EAH1B,YAAV;EAMA,SAAOyB,IAAP;EACD;;EAED,SAASD,WAAT,CAAqBD,EAArB,EAAyB;EAAE;EACzB,MAAQvB,QAAR,GAAqBuB,EAArB,CAAQvB,QAAR;;EACA,MAAIA,QAAQ,IAAIA,QAAQ,CAACvC,MAAzB,EAAiC;EAC/B,qBAAUuC,QAAQ,CAAC2B,GAAT,CAAa,UAACC,CAAD;EAAA,aAAOC,GAAG,CAACD,CAAD,CAAV;EAAA,KAAb,EAA4BE,IAA5B,CAAiC,GAAjC,CAAV;EACD;;EACD,SAAO,KAAP;EACD;;EAED,SAASD,GAAT,CAAaE,IAAb,EAAmB;EAAE;EACnB,MAAIA,IAAI,CAAChC,IAAL,KAAc,CAAlB,EAAqB;EACnB,WAAOuB,QAAQ,CAACS,IAAD,CAAf;EACD;;EACD,MAAQ1B,IAAR,GAAiB0B,IAAjB,CAAQ1B,IAAR,CAJiB;EAMjB;EACA;EACA;EACA;EACA;;EACA,MAAM2B,MAAM,GAAG,EAAf,CAXiB;;EAYjB,MAAIrB,KAAJ;EAAW,MACTsB,KADS;EAEX,MAAIC,SAAS,GAAGb,YAAY,CAACa,SAAb,GAAyB,CAAzC;;EAEA,SAAOvB,KAAK,GAAGU,YAAY,CAACc,IAAb,CAAkB9B,IAAlB,CAAf,EAAwC;EACtC4B,IAAAA,KAAK,GAAGtB,KAAK,CAACsB,KAAd;;EACA,QAAIA,KAAK,GAAGC,SAAZ,EAAuB;EACrBF,MAAAA,MAAM,CAAC5E,IAAP,CAAYgF,IAAI,CAACC,SAAL,CAAehC,IAAI,CAAC9D,KAAL,CAAW2F,SAAX,EAAsBD,KAAtB,CAAf,CAAZ;EACD;;EACDD,IAAAA,MAAM,CAAC5E,IAAP,cAAkBuD,KAAK,CAAC,CAAD,CAAL,CAAS2B,IAAT,EAAlB;EACAJ,IAAAA,SAAS,GAAGD,KAAK,GAAGtB,KAAK,CAAC,CAAD,CAAL,CAASlD,MAA7B;EACD;;EACD,MAAIyE,SAAS,GAAG7B,IAAI,CAAC5C,MAArB,EAA6B;EAC3BuE,IAAAA,MAAM,CAAC5E,IAAP,CAAYgF,IAAI,CAACC,SAAL,CAAehC,IAAI,CAAC9D,KAAL,CAAW2F,SAAX,CAAf,CAAZ;EACD;;EACD,sBAAaF,MAAM,CAACF,IAAP,CAAY,GAAZ,CAAb;EACD;;EAED,SAASJ,QAAT,CAAkB7B,KAAlB,EAAyB;EAAE;EACzB,MAAI0C,GAAG,GAAG,EAAV;EACA1C,EAAAA,KAAK,CAAC/E,OAAN,CAAc,UAACkD,IAAD,EAAU;EACtB,QAAIA,IAAI,CAAC8C,IAAL,KAAc,OAAlB,EAA2B;EACzB,UAAM0B,GAAG,GAAG,EAAZ;EACAxE,MAAAA,IAAI,CAAC/D,KAAL,CAAWwI,KAAX,CAAiB,GAAjB,EAAsB3H,OAAtB,CAA8B,UAAC4H,SAAD,EAAe;EAC3C,YAAIA,SAAJ,EAAe;EACb,cAAMC,SAAS,GAAGD,SAAS,CAACD,KAAV,CAAgB,GAAhB,CAAlB;EACAD,UAAAA,GAAG,CAACG,SAAS,CAAC,CAAD,CAAV,CAAH,GAAoBA,SAAS,CAAC,CAAD,CAA7B;EACD;EACF,OALD;EAMAJ,MAAAA,GAAG,qBAAcH,IAAI,CAACC,SAAL,CAAeG,GAAf,CAAd,MAAH;EACD,KATD,MASO;EACLD,MAAAA,GAAG,cAAOvE,IAAI,CAAC8C,IAAZ,cAAoBsB,IAAI,CAACC,SAAL,CAAerE,IAAI,CAAC/D,KAApB,CAApB,MAAH;EACD;EACF,GAbD,EAFuB;;EAiBvB,oBAAWsI,GAAG,CAAChG,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd,CAAX;EACD;;ECrED;EAIO,SAASqG,iBAAT,CAA2BC,QAA3B,EAAqC;EAC1C;EACA,MAAMtD,IAAI,GAAGiB,UAAU,CAACqC,QAAD,CAAvB,CAF0C;EAI1C;EAEA;EACA;;EAEA,MAAMpB,IAAI,GAAGH,QAAQ,CAAC/B,IAAD,CAArB,CAT0C;;EAY1C,MAAMuD,QAAQ,GAAG,IAAIC,QAAJ,8BAAmCtB,IAAnC,OAAjB,CAZ0C;;EAe1C,SAAOqB,QAAP;EACD;;ECpBD,IAAME,WAAW,GAAG,EAApB;EAEA;;EAEA,IAAIC,OAAO,GAAG,KAAd;;EAEA,SAASC,aAAT,GAAyB;EACvBF,EAAAA,WAAW,CAAClI,OAAZ,CAAoB,UAACqI,EAAD;EAAA,WAAQA,EAAE,EAAV;EAAA,GAApB;EACAF,EAAAA,OAAO,GAAG,KAAV;EACD;;;EAGM,SAASG,QAAT,CAAkBD,EAAlB,EAAsB;EAC3BH,EAAAA,WAAW,CAAC5F,IAAZ,CAAiB+F,EAAjB;;EACA,MAAIF,OAAO,KAAK,KAAhB,EAAuB;EACrBI,IAAAA,UAAU,CAACH,aAAD,EAAgB,CAAhB,CAAV;EACAD,IAAAA,OAAO,GAAG,IAAV;EACD;EACF;;EChBD,IAAIK,KAAK,GAAG,EAAZ;EACA,IAAIC,GAAG,GAAG,EAAV;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,SAASC,mBAAT,GAA+B;EAC7BF,EAAAA,KAAK,CAACxI,OAAN,CAAc,UAACoC,OAAD;EAAA,WAAaA,OAAO,CAACuG,GAAR,EAAb;EAAA,GAAd;EACAH,EAAAA,KAAK,GAAG,EAAR;EACAC,EAAAA,GAAG,GAAG,EAAN;EACD;;EAEM,SAASG,YAAT,CAAsBxG,OAAtB,EAA+B;EAAE;EACtC,MAAQP,EAAR,GAAeO,OAAf,CAAQP,EAAR;;EACA,MAAI,CAAC4G,GAAG,CAAC5G,EAAD,CAAR,EAAc;EACZ2G,IAAAA,KAAK,CAAClG,IAAN,CAAWF,OAAX;EACAqG,IAAAA,GAAG,CAAC5G,EAAD,CAAH,GAAU,IAAV,CAFY;EAIZ;;EACAyG,IAAAA,QAAQ,CAACI,mBAAD,CAAR;EACD;EACF;;ECzBD,IAAI7G,EAAE,GAAG,CAAT;;MACMgH;EACJ,mBAAYpJ,EAAZ,EAAgBqJ,QAAhB,EAA0BC,QAA1B,EAAoCvI,OAApC,EAA6C;EAAA;;EAAE;EAC7C,SAAKf,EAAL,GAAUA,EAAV;EACA,SAAKsJ,QAAL,GAAgBA,QAAhB;EACA,SAAKvI,OAAL,GAAeA,OAAf,CAH2C;;EAK3C,SAAKqB,EAAL,GAAUA,EAAE,EAAZ,CAL2C;;EAM3C,SAAKmH,MAAL,GAAcF,QAAd;EACA,SAAKG,MAAL,GAAc,IAAIC,GAAJ,EAAd;EACA,SAAKC,IAAL,GAAY,EAAZ,CAR2C;;EAS3C,SAAKxJ,GAAL;EACD;;;;aAED,eAAM;EACJ;EACA6C,MAAAA,UAAU,CAAC,IAAD,CAAV,CAFI;;EAGJ,WAAKwG,MAAL,GAHI;;EAIJvG,MAAAA,SAAS,GAJL;EAKL;;;aAED,kBAAS;EAAE;EACT;EACA;EACA;EACAmG,MAAAA,YAAY,CAAC,IAAD,CAAZ,CAJO;EAMR;;;aAED,eAAM;EACJ,WAAKjJ,GAAL;EACD;;;aAED,gBAAOgC,GAAP,EAAY;EAAE;EACZ,UAAQE,EAAR,GAAeF,GAAf,CAAQE,EAAR,CADU;;EAEV,UAAI,CAAC,KAAKoH,MAAL,CAAYR,GAAZ,CAAgB5G,EAAhB,CAAL,EAA0B;EACxB,aAAKoH,MAAL,CAAYG,GAAZ,CAAgBvH,EAAhB;EACA,aAAKsH,IAAL,CAAU7G,IAAV,CAAeX,GAAf;EACAA,QAAAA,GAAG,CAAC0H,MAAJ,CAAW,IAAX,EAHwB;EAIzB;EACF;;;;;;EC3CI,SAASC,KAAT,CAAeC,QAAf,EAAyBC,KAAzB,EAAgC;EACnC;EACA;EACA,MAAMC,aAAa,GAAGF,QAAQ,CAACG,QAA/B;;EACA,MAAID,aAAJ,EAAmB;EACf,QAAME,MAAM,GAAGJ,QAAf;EACA,QAAMK,SAAS,GAAGD,MAAM,CAACE,UAAzB,CAFe;;EAGf,QAAIpD,EAAE,GAAGqD,SAAS,CAACN,KAAD,CAAlB;EACAI,IAAAA,SAAS,CAACG,YAAV,CAAuBtD,EAAvB,EAA2BkD,MAAM,CAACK,WAAlC;EACAJ,IAAAA,SAAS,CAACK,WAAV,CAAsBN,MAAtB;EACA,WAAOlD,EAAP;EACH;EACJ;;EAED,SAASqD,SAAT,CAAmBN,KAAnB,EAA0B;EACtB;EACA,MACIxE,GADJ,GAMIwE,KANJ,CACIxE,GADJ;EAAA,MAEIE,QAFJ,GAMIsE,KANJ,CAEItE,QAFJ;EAAA,MAMIsE,KANJ,CAGItK,GAHJ;EAAA,MAMIsK,KANJ,CAIIxK,IAJJ;EAAA,UAKIuG,IALJ,GAMIiE,KANJ,CAKIjE,KAPkB;EAUtB;;EACA,MAAI,OAAOP,GAAP,KAAe,QAAnB,EAA6B;EACzBwE,IAAAA,KAAK,CAAC/C,EAAN,GAAWyD,QAAQ,CAACC,aAAT,CAAuBnF,GAAvB,CAAX;EACAoF,IAAAA,gBAAgB,CAACZ,KAAD,CAAhB;EACAtE,IAAAA,QAAQ,CAAClF,OAAT,CAAiB,UAAAqK,KAAK,EAAI;EAAE;EACxB,aAAOb,KAAK,CAAC/C,EAAN,CAAS6D,WAAT,CAAqBR,SAAS,CAACO,KAAD,CAA9B,CAAP;EACH,KAFD;EAGH,GAND,MAMO;EAAE;EACLb,IAAAA,KAAK,CAAC/C,EAAN,GAAWyD,QAAQ,CAACK,cAAT,CAAwBhF,IAAxB,CAAX;EACH;;EACD,SAAOiE,KAAK,CAAC/C,EAAb;EACH;;EAED,SAAS2D,gBAAT,CAA0BZ,KAA1B,EAAiC;EAAE;EAC/B,MAAIgB,QAAQ,GAAGhB,KAAK,CAACxK,IAAN,IAAc,EAA7B;EACA,MAAIyH,EAAE,GAAG+C,KAAK,CAAC/C,EAAf;;EACA,OAAK,IAAIvH,GAAT,IAAgBsL,QAAhB,EAA0B;EACtB,QAAItL,GAAG,KAAK,OAAZ,EAAqB;EACjB,WAAK,IAAIuL,SAAT,IAAsBD,QAAQ,CAACE,KAA/B,EAAsC;EAClCjE,QAAAA,EAAE,CAACiE,KAAH,CAASD,SAAT,IAAsBD,QAAQ,CAACE,KAAT,CAAeD,SAAf,CAAtB;EACH;EACJ,KAJD,MAIO,IAAIvL,GAAG,KAAK,OAAZ,EAAqB;EACxBuH,MAAAA,EAAE,CAACkE,SAAH,GAAeH,QAAQ,SAAvB;EACH,KAFM,MAEA;EACH/D,MAAAA,EAAE,CAACmE,YAAH,CAAgB1L,GAAhB,EAAqBsL,QAAQ,CAACtL,GAAD,CAA7B;EACH;EACJ;EACJ;;ECnDD;;EAOO,SAAS2L,cAAT,CAAwBC,GAAxB,EAA6B;EAClCA,EAAAA,GAAG,CAAChK,SAAJ,CAAciK,OAAd,GAAwB,UAAUvB,KAAV,EAAiB;EACvC,QAAM/J,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACuL,GAAH,GAAS1B,KAAK,CAAC7J,EAAE,CAACuL,GAAJ,EAASxB,KAAT,CAAd,CAFuC;EAGxC,GAHD;EAID;EAEM,SAASyB,cAAT,CAAwBxL,EAAxB,EAA4BgH,EAA5B,EAAgC;EACrC,EAAgBhH,EAAE,CAACkE;EACnBlE,EAAAA,EAAE,CAACuL,GAAH,GAASvE,EAAT,CAFqC;;EAIrCyE,EAAAA,QAAQ,CAACzL,EAAD,EAAK,aAAL,CAAR,CAJqC;;EAOrC,MAAM0L,eAAe,GAAG,SAAlBA,eAAkB,GAAM;EAC5B;EACA;EACA;EAEA;EACA1L,IAAAA,EAAE,CAACsL,OAAH,CAAWtL,EAAE,CAAC2L,OAAH,EAAX,EAN4B;;EAO7B,GAPD,CAPqC;;;EAgBrC,MAAIvC,OAAJ,CAAYpJ,EAAZ,EAAgB0L,eAAhB,EAAiC,YAAM,EAAvC,EAA4C,IAA5C;EACAD,EAAAA,QAAQ,CAACzL,EAAD,EAAK,SAAL,CAAR;EACD;EAEM,SAASyL,QAAT,CAAkBzL,EAAlB,EAAsBQ,IAAtB,EAA4B;EACjC,MAAMoL,QAAQ,GAAG5L,EAAE,CAACkE,QAAH,CAAY1D,IAAZ,CAAjB;;EACA,MAAIoL,QAAJ,EAAc;EACZ,SAAK,IAAI9H,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8H,QAAQ,CAAC1I,MAA7B,EAAqCY,CAAC,EAAtC,EAA0C;EACxC8H,MAAAA,QAAQ,CAAC9H,CAAD,CAAR,CAAYU,IAAZ,CAAiBxE,EAAjB;EACD;EACF;EACF;;ECnCM,SAAS6L,SAAT,CAAmBR,GAAnB,EAAwB;EAC7B;EACAA,EAAAA,GAAG,CAAChK,SAAJ,CAAcyK,KAAd,GAAsB,UAAU/K,OAAV,EAAmB;EACvC;EACA,QAAMf,EAAE,GAAG,IAAX,CAFuC;;EAKvCA,IAAAA,EAAE,CAACkE,QAAH,GAActD,YAAY,CAACZ,EAAE,CAAC+L,WAAH,CAAehL,OAAhB,EAAyBA,OAAzB,CAA1B,CALuC;;EAOvC0K,IAAAA,QAAQ,CAACzL,EAAD,EAAK,cAAL,CAAR;EAEAgE,IAAAA,SAAS,CAAChE,EAAD,CAAT,CATuC;;EAWvCyL,IAAAA,QAAQ,CAACzL,EAAD,EAAK,SAAL,CAAR,CAXuC;;EAcvC,QAAIA,EAAE,CAACkE,QAAH,CAAY8C,EAAhB,EAAoB;EAClBhH,MAAAA,EAAE,CAACgM,MAAH,CAAUhM,EAAE,CAACkE,QAAH,CAAY8C,EAAtB;EACD;EACF,GAjBD;;EAkBAqE,EAAAA,GAAG,CAAChK,SAAJ,CAAc2K,MAAd,GAAuB,UAAUhF,EAAV,EAAc;EACnC,QAAMhH,EAAE,GAAG,IAAX;EACA,QAAMe,OAAO,GAAGf,EAAE,CAACkE,QAAnB;EACA8C,IAAAA,EAAE,GAAGyD,QAAQ,CAACwB,aAAT,CAAuBjF,EAAvB,CAAL,CAHmC;;EAMnC,QAAI,CAACjG,OAAO,CAACmL,MAAb,EAAqB;EACnB,UAAM5D,QAAN,GAAmBvH,OAAnB,CAAMuH,QAAN;;EACA,UAAI,CAACA,QAAD,IAAatB,EAAjB,EAAqB;EACnBsB,QAAAA,QAAQ,GAAGtB,EAAE,CAACmF,SAAd;EACD,OAJkB;;;EAOnB,UAAMD,MAAM,GAAG7D,iBAAiB,CAACC,QAAD,CAAhC;EACAvH,MAAAA,OAAO,CAACmL,MAAR,GAAiBA,MAAjB;EACD,KAfkC;;;EAkBnCV,IAAAA,cAAc,CAACxL,EAAD,EAAKgH,EAAL,CAAd;EACD,GAnBD;;EAoBAqE,EAAAA,GAAG,CAAChK,SAAJ,CAAc+K,SAAd,GAA0BvD,QAA1B;EACD;;EC/CM,SAAS6B,aAAT,CAAuBnF,GAAvB,EAAoD;EAAA,MAAxBhG,IAAwB,uEAAjB,EAAiB;EAAE;EACzD,MAAIE,GAAG,GAAGF,IAAI,CAACE,GAAf;;EACA,MAAIA,GAAJ,EAAS;EAAE,WAAOF,IAAI,CAACE,GAAZ;EAAiB;;EAF2B,oCAAVgG,QAAU;EAAVA,IAAAA,QAAU;EAAA;;EAGvD,SAAOsE,KAAK,CAACxE,GAAD,EAAMhG,IAAN,EAAYE,GAAZ,EAAiBgG,QAAjB,EAA2BvE,SAA3B,CAAZ;EACH;EAEM,SAAS4J,cAAT,CAAwBhF,IAAxB,EAA8B;EACjC;EACA,SAAOiE,KAAK,CAAC7I,SAAD,EAAYA,SAAZ,EAAuBA,SAAvB,EAAkCA,SAAlC,EAA6C4E,IAA7C,CAAZ;EACH;;EAGD,SAASiE,KAAT,CAAexE,GAAf,EAAoBhG,IAApB,EAA0BE,GAA1B,EAA+BgG,QAA/B,EAAyCK,IAAzC,EAA+C;EAE3C,SAAO;EACHP,IAAAA,GAAG,EAAHA,GADG;EAEHhG,IAAAA,IAAI,EAAJA,IAFG;EAGHE,IAAAA,GAAG,EAAHA,GAHG;EAIHgG,IAAAA,QAAQ,EAARA,QAJG;EAKHK,IAAAA,IAAI,EAAJA;EALG,GAAP;EAOH;EAGD;EACA;EACA;EACA;EACA;EACA;EACA;;EC5BO,SAASuG,WAAT,CAAqBhB,GAArB,EAA0B;EAC/B;EACA;EACA;EAEAA,EAAAA,GAAG,CAAChK,SAAJ,CAAciL,EAAd,GAAmB,YAAY;EAC7B,WAAO5B,aAAa,MAAb,SAAiB6B,SAAjB,CAAP,CAD6B;EAE9B,GAFD;;EAIAlB,EAAAA,GAAG,CAAChK,SAAJ,CAAcmL,EAAd,GAAmB,UAAU1G,IAAV,EAAgB;EACjC,WAAOgF,cAAc,CAAChF,IAAD,CAArB;EACD,GAFD;;EAIAuF,EAAAA,GAAG,CAAChK,SAAJ,CAAcoL,EAAd,GAAmB,UAAUC,GAAV,EAAe;EAChC,WAAOA,GAAG,IAAI,IAAP,GAAc,EAAd,GAAoB,QAAOA,GAAP,MAAe,QAAf,GAA0B7E,IAAI,CAACC,SAAL,CAAe4E,GAAf,CAA1B,GAAgDA,GAA3E;EACD,GAFD;;EAIArB,EAAAA,GAAG,CAAChK,SAAJ,CAAcsK,OAAd,GAAwB,YAAY;EAAE;EACpC,QAAM3L,EAAE,GAAG,IAAX;EACA,QAAQkM,MAAR,GAAmBlM,EAAE,CAACkE,QAAtB,CAAQgI,MAAR;EACA,WAAOA,MAAM,CAAC1H,IAAP,CAAYxE,EAAZ,CAAP,CAHkC;EAInC,GAJD;EAKD;;ECtBM,SAAS2M,aAAT,CAAuBtB,GAAvB,EAA4B;EACjCA,EAAAA,GAAG,CAACtK,OAAJ,GAAc,EAAd;;EACAsK,EAAAA,GAAG,CAACuB,KAAJ,GAAY,UAAUA,KAAV,EAAiB;EAC3B,SAAK7L,OAAL,GAAeH,YAAY,CAAC,KAAKG,OAAN,EAAe6L,KAAf,CAA3B;EACD,GAFD,CAFiC;EAMjC;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EACD;;ECjBD,SAASvB,GAAT,CAAatK,OAAb,EAAsB;EACpB;EACA,OAAK+K,KAAL,CAAW/K,OAAX;EACD;;EACD8K,SAAS,CAACR,GAAD,CAAT;EACAgB,WAAW,CAAChB,GAAD,CAAX;EACAD,cAAc,CAACC,GAAD,CAAd;EACAsB,aAAa,CAACtB,GAAD,CAAb;;;;;;;;"}